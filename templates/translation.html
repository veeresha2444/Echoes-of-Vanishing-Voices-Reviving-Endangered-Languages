
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Translation - Konkani-Lambani-Hindi Learn</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif}
:root{--p:#4e54c8;--s:#8f94fb}
body{background:linear-gradient(to right,var(--p),var(--s));min-height:100vh}
header{background:#fff;padding:15px;box-shadow:0 2px 10px rgba(0,0,0,.1)}
.container{max-width:1200px;margin:auto;padding:0 20px}
nav ul{display:flex;gap:20px;list-style:none}
nav a{text-decoration:none;color:#333;padding:6px 12px;border-radius:5px}
nav a.active,nav a:hover{background:var(--p);color:#fff}
.page{background:#fff;margin:40px auto;padding:30px;border-radius:10px;max-width:900px}
h2{text-align:center;color:var(--p);margin-bottom:20px}
.language-selection{display:flex;justify-content:center;gap:15px;margin-bottom:20px}
.language-option{border:2px solid var(--p);padding:8px 20px;border-radius:25px;cursor:pointer}
.language-option.active{background:var(--p);color:#fff}
.translation-container{display:flex;gap:20px;flex-wrap:wrap}
.translation-box{flex:1;min-width:300px}
textarea{width:100%;height:150px;padding:12px;border-radius:8px;border:1px solid #ccc;font-size:1rem}
.language-selector{display:flex;justify-content:space-between;margin-bottom:8px}
select{padding:6px 12px}
.btn{display:flex;justify-content:center;gap:10px;margin-top:20px}
button{padding:12px 25px;border:none;border-radius:25px;font-weight:bold;color:#fff;
background:linear-gradient(to right,var(--p),var(--s));cursor:pointer}
button.speak{background:linear-gradient(to right,#ff6b6b,#ff8e8e)}
.status-message{text-align:center;margin-top:10px;padding:10px;border-radius:6px;display:none}
.status-message.success{background:#d4edda;color:#155724;display:block}
.status-message.error{background:#f8d7da;color:#721c24;display:block}
.language-info{text-align:center;margin-top:10px;color:#666}
</style>
</head>

<body>

<header>
<div class="container" style="display:flex;justify-content:space-between;align-items:center">
<h2>Konkani–Lambani–Hindi Learn</h2>
<nav>
<ul>
<li><a href="/home">Home</a></li>
<li><a href="/translation" class="active">Translation</a></li>
<li><a href="/courses">Dictionary</a></li>
<li><a href="/about">About</a></li>
<li><a href="/contact">Contact</a></li>
</ul>
</nav>
</div>
</header>

<main class="container">
<div class="page">

<h2>Language Translation</h2>

<div class="language-selection">
<div class="language-option active" data-lang="konkani">Konkani ↔ Hindi</div>
<div class="language-option" data-lang="lambani">Lambani ↔ Hindi</div>
</div>

<div class="translation-container">
<div class="translation-box">
<div class="language-selector">
<label>From:</label>
<select id="from-language">
<option>Konkani</option>
<option>Hindi</option>
</select>
</div>
<textarea id="source-text" placeholder="Enter text..."></textarea>
</div>

<div class="translation-box">
<div class="language-selector">
<label>To:</label>
<select id="to-language">
<option>Hindi</option>
<option>Konkani</option>
</select>
</div>
<textarea id="translated-text" placeholder="Translation appears here..." readonly></textarea>
</div>
</div>

<div class="btn">
<button id="translate-btn"><i class="fas fa-language"></i> Translate</button>
<button id="speak-btn" class="speak"><i class="fas fa-volume-up"></i> Speak</button>
</div>

<div id="status-message" class="status-message"></div>
<div class="language-info" id="language-info">
Currently translating between Konkani and Hindi
</div>

</div>
</main>

<script>
let currentLanguage="konkani";
let audio=null;

function showStatus(msg,type){
const el=document.getElementById("status-message");
el.textContent=msg;
el.className="status-message "+type;
}

document.querySelectorAll(".language-option").forEach(opt=>{
opt.onclick=()=>{
document.querySelectorAll(".language-option").forEach(o=>o.classList.remove("active"));
opt.classList.add("active");
currentLanguage=opt.dataset.lang;

const from=document.getElementById("from-language");
const to=document.getElementById("to-language");

if(currentLanguage==="konkani"){
from.innerHTML="<option>Konkani</option><option>Hindi</option>";
to.innerHTML="<option>Hindi</option><option>Konkani</option>";
document.getElementById("language-info").textContent=
"Currently translating between Konkani and Hindi";
}else{
from.innerHTML="<option>Lambani</option><option>Hindi</option>";
to.innerHTML="<option>Hindi</option><option>Lambani</option>";
document.getElementById("language-info").textContent=
"Currently translating between Lambani and Hindi";
}

document.getElementById("source-text").value="";
document.getElementById("translated-text").value="";
};
});

document.getElementById("translate-btn").onclick=async()=>{
const text=document.getElementById("source-text").value.trim();
const fromLang=document.getElementById("from-language").value;

if(!text)return showStatus("Enter text","error");

try{
const r=await fetch("/translate",{method:"POST",headers:{"Content-Type":"application/json"},
body:JSON.stringify({text,source_lang:fromLang,language_pair:currentLanguage})});
const d=await r.json();
document.getElementById("translated-text").value=d.translation;
showStatus("Translation successful","success");
}catch{showStatus("Translation failed","error")}
};

document.getElementById("speak-btn").onclick=async()=>{
const text=document.getElementById("translated-text").value.trim();
if(!text)return showStatus("Translate first","error");

try{
const r=await fetch("/speak",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({text:text})
});

if(!r.ok)throw new Error();

const blob=await r.blob();
audio=new Audio(URL.createObjectURL(blob));
audio.play();
showStatus("Speaking...","success");

}catch{
showStatus("Speech failed","error");
}
};
</script>

</body>
</html>

